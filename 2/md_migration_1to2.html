<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ariles: Migration from version 1.X to 2.X</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ariles
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Migration from version 1.X to 2.X </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>APIs of versions 1.X and 2.X of <code>ariles</code> are not compatible with each other, but are conceptually similar, this document highlights differences and gives some hints regarding migration of existing code to the new API. Note that packages of versions 1.X and 2.X are compatible and can be used simultaneously.</p>
<h2>Declaration &amp; defaults </h2>
<p>Old API example: </p><div class="fragment"><div class="line">    class ArilesBaseClass : public ariles::ConfigurableBase</div><div class="line">    {</div><div class="line">#define ARILES_SECTION_ID &quot;ArilesBaseClass&quot;</div><div class="line">#define ARILES_ENTRIES                          \</div><div class="line">    ARILES_TYPED_ENTRY(real_member, double)     \</div><div class="line">    ARILES_TYPED_ENTRY_(integer_member, int)</div><div class="line">#include ARILES_INITIALIZE</div><div class="line"></div><div class="line">    public:</div><div class="line">        virtual void setDefaults()</div><div class="line">        {</div><div class="line">            real_member = 0.0;</div><div class="line">            integer_member_ = 12;</div><div class="line">        }</div><div class="line">    };</div></div><!-- fragment --><p>New API: </p><div class="fragment"><div class="line">// 1. namespace has been renamed: ariles -&gt; ariles2</div><div class="line">// 2. classes should inherit from ariles2::DefaultBase</div><div class="line">    class ArilesBaseClass : public ariles2::DefaultBase</div><div class="line">    {</div><div class="line">// 3. ARILES_SECTION_ID has been renamed to ARILES2_DEFAULT_ID and is now</div><div class="line">// optional -- the default ID is now an empty string.</div><div class="line">// 4. ARILES_ prefix has been replaced with ARILES2_</div><div class="line">// 5. all entries now should pass an auxiliary parameter &#39;v&#39; in this example,</div><div class="line">// but the name can be arbitrary</div><div class="line">#define ARILES2_ENTRIES(v)                          \</div><div class="line">    ARILES2_TYPED_ENTRY(v, real_member, double)     \</div><div class="line">    ARILES2_TYPED_ENTRY_(v, integer_member, int)</div><div class="line">#include ARILES2_INITIALIZE</div><div class="line"></div><div class="line">    public:</div><div class="line">// 6. a method that initializes fields to their defaults is now always</div><div class="line">// generated automatically - it is not necessary to specify</div><div class="line">// ARILES_AUTO_DEFAULTS</div><div class="line">// 7. the following method can be used to override automatically</div><div class="line">// generated initialization method, note that it is not virtual.</div><div class="line">        void arilesVisit(const ariles2::Defaults &amp; /*visitor*/, const ariles2::Defaults::Parameters &amp; /*param*/)</div><div class="line">        {</div><div class="line">            real_member = 0.0;</div><div class="line">            integer_member_ = 12;</div><div class="line">        }</div><div class="line">    };</div></div><!-- fragment --><h2>Operations on ariles classes </h2>
<p>Old API: </p><div class="fragment"><div class="line">MyArilesClass my_ariles_class;</div><div class="line">my_container_class.setDefaults();</div><div class="line"></div><div class="line">my_ariles_class.writeConfig&lt;ariles::yaml_cpp&gt;(&quot;config.yaml&quot;);</div><div class="line">my_ariles_class.readConfig&lt;ariles::yaml_cpp&gt;(&quot;config.yaml&quot;);</div><div class="line"></div><div class="line">ariles::ros::Writer writer(nh);</div><div class="line">my_ariles_class.writeConfig(writer);</div><div class="line"></div><div class="line">ariles::ros::Reader reader(nh);</div><div class="line">my_ariles_class.readConfig(reader);</div></div><!-- fragment --><p>New API: </p><div class="fragment"><div class="line">MyArilesClass my_ariles_class;</div><div class="line"></div><div class="line">// 1. all operations on ariles classes are now performed using</div><div class="line">// &#39;ariles2::apply()&#39; function instead of class member methods</div><div class="line"></div><div class="line">ariles2::apply&lt;ariles2::Defaults&gt;();</div><div class="line"></div><div class="line">ariles2::apply&lt;ariles2::yaml_cpp::Writer&gt;(&quot;config.yaml&quot;, my_ariles_class);</div><div class="line">ariles2::apply&lt;ariles2::yaml_cpp::Reader&gt;(&quot;config.yaml&quot;, my_ariles_class);</div><div class="line"></div><div class="line">ariles2::rosparam::Writer writer(nh);</div><div class="line">ariles2::apply(writer, my_ariles_class);</div><div class="line"></div><div class="line">ariles2::rosparam::Reader reader(nh);</div><div class="line">ariles2::apply(reader, my_ariles_class);</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
