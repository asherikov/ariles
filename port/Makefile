# $FreeBSD$

PORTNAME=		ariles
DISTVERSION=	2.0.0
CATEGORIES=		devel

MAINTAINER=		asherikov@yandex.com
COMMENT=		C++ serialization / configuration library

LICENSE=		APACHE20

BUILD_DEPENDS=cmake:devel/cmake ${ARILES_DEPENDS}
BUILD_DEPENDS=${ARILES_DEPENDS}
RUN_DEPENDS=${ARILES_DEPENDS}

USES=			cmake

USE_GITHUB=		yes
GH_ACCOUNT=		asherikov
GH_PROJECT=		ariles
GH_TAGNAME=		2.0.0-prerelease

USE_LDCONFIG=	yes

ARILES_DEPENDS=	${LOCALBASE}/include/eigen3/Eigen/Core:math/eigen3 \
				${LOCALBASE}/include/boost/lexical_cast.hpp:devel/boost-libs

CMAKE_ARGS+=	-DARILES_VISITORS_DEFAULT_MODE=OFF \
				-DARILES_BUILD_REGRESSION_TESTS=OFF

OPTIONS_SUB=	yes
OPTIONS_DEFINE=	MSGPACK RAPIDJSON PUGIXML OCTAVE JSONNET GRAPHVIZ NAMEVALUE
OPTIONS_SINGLE=					CPP_STANDARD
OPTIONS_SINGLE_CPP_STANDARD=	CPP11 CPP03
OPTIONS_RADIO=					YAMLCPP_VERSION
OPTIONS_RADIO_YAMLCPP_VERSION=	YAMLCPP03 YAMLCPP

CPP_STANDARD_DESC=C++ standard
YAMLCPP_VERSION_DESC=yaml-cpp API version

CPP03_PREVENTS=YAMLCPP
JSONNET_IMPLIES=RAPIDJSON

CPP11_DESC=		Use C++11
CPP03_DESC=		Use C++03

CPP11_CMAKE_ON=		-DARILES_CPP_STANDARD=c++11
CPP03_CMAKE_ON=		-DARILES_CPP_STANDARD=c++03

MSGPACK_DESC=	msgpack support
YAMLCPP03_DESC=	yaml-cpp03 support
YAMLCPP_DESC=	yaml-cpp support
RAPIDJSON_DESC=	RapisJSON support
PUGIXML_DESC=	PugiXML support
OCTAVE_DESC=	Octave script support (output only, no dependencies)
JSONNET_DESC=	Jsonnet preprocessing for JSON

MSGPACK_LIB_DEPENDS=	libmsgpackc.so:devel/msgpack
YAMLCPP03_LIB_DEPENDS=	libyaml-cpp03.so:devel/yaml-cpp03
YAMLCPP_LIB_DEPENDS=	libyaml-cpp.so:devel/yaml-cpp
RAPIDJSON_BUILD_DEPENDS=${LOCALBASE}/include/rapidjson/document.h:devel/rapidjson
PUGIXML_LIB_DEPENDS=	libpugixml.so:textproc/pugixml
JSONNET_LIB_DEPENDS=	libjsonnet.so:devel/jsonnet
#OCTAVE_LIB_DEPENDS=

MSGPACK_CMAKE_ON=	-DARILES_VISITOR_msgpack=ON
YAMLCPP03_CMAKE_ON=	-DARILES_VISITOR_yaml_cpp03=ON
YAMLCPP_CMAKE_ON=	-DARILES_VISITOR_yaml_cpp=ON
RAPIDJSON_CMAKE_ON=	-DARILES_VISITOR_rapidjson=ON
PUGIXML_CMAKE_ON=	-DARILES_VISITOR_pugixml=ON
JSONNET_CMAKE_ON=	-DARILES_VISITOR_jsonnet=ON
OCTAVE_CMAKE_ON=	-DARILES_VISITOR_octave=ON
GRAPHVIZ_CMAKE_ON=	-DARILES_VISITOR_graphviz=ON
NAMEVALUE_CMAKE_ON=	-DARILES_VISITOR_namevalue=ON

.include <bsd.port.mk>
